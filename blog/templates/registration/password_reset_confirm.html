{% extends "blog/base.html" %}
{% load static %}

{% block title %}Redefinir Senha - MeuBlog{% endblock %}

{% block content %}
<div style="text-align: center; margin-top: 40px;">
  <img src="{% static 'blog/picapau.png' %}" alt="Mascote" height="100">
  <h2 style="color: #d62828; margin-top: 1em;">üîê Digite sua nova senha</h2>
</div>

{% if validlink %}
  <form method="post" style="max-width: 400px; margin: 30px auto; background: white; padding: 2em; border-radius: 10px; box-shadow: 0 2px 12px rgba(0,0,0,0.05);">
    {% csrf_token %}
    
    <div style="margin-bottom: 1.5em;">
      <label for="{{ form.new_password1.id_for_label }}" style="display: block; font-weight: bold; color: #003f88; margin-bottom: 0.5em;">
        Nova senha
      </label>
      {{ form.new_password1 }}
      {% if form.new_password1.help_text %}
        <small style="display: block; margin-top: 0.3em; color: #666; font-size: 0.85rem;">
          {{ form.new_password1.help_text }}
        </small>
      {% endif %}
      {% if form.new_password1.errors %}
        <div style="color: #d62828; margin-top: 0.3em;">{{ form.new_password1.errors }}</div>
      {% endif %}
    </div>

    <div style="margin-bottom: 1.5em;">
      <label for="{{ form.new_password2.id_for_label }}" style="display: block; font-weight: bold; color: #003f88; margin-bottom: 0.5em;">
        Confirmar nova senha
      </label>
      {{ form.new_password2 }}
      {% if form.new_password2.errors %}
        <div style="color: #d62828; margin-top: 0.3em;">{{ form.new_password2.errors }}</div>
      {% endif %}
    </div>

    <button type="submit" style="width: 100%;">Atualizar senha</button>
  </form>
{% else %}
  <div style="max-width: 500px; margin: 40px auto; text-align: center; background: #f8d7da; padding: 2em; border-radius: 10px; border-left: 3px solid #d62828;">
    <h3 style="color: #721c24;">‚ùå Link inv√°lido ou expirado</h3>
    <p style="color: #721c24;">
      Este link de recupera√ß√£o de senha n√£o √© mais v√°lido. <br>
      Provavelmente voc√™ j√° o usou ou ele expirou.
    </p>
    <a href="{% url 'password_reset' %}" style="display: inline-block; margin-top: 1em; padding: 10px 30px; background-color: #d62828; color: white; text-decoration: none; border-radius: 5px;">
      Solicitar novo link
    </a>
  </div>
{% endif %}
{% endblock %}